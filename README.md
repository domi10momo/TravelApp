# TravelApp

旅行の予定作成、感想の共有ができるサイトです。
https://young-ravine-41583.herokuapp.com/

# サービス概要

自分の行きたい、過去に行った旅行コースの保存、記録ができるサービスです。

- 行きたい観光地をマイページに保存
- 行く予定、完了した旅行の編集、記録
- サービス利用者の観光地に訪れた感想を閲覧可能

<img width="1253" alt="トップページ" src="https://user-images.githubusercontent.com/35606852/111029322-77a46280-843f-11eb-9a39-fd98dc4d60bc.png">

<img width="1258" alt="マイページ" src="https://user-images.githubusercontent.com/35606852/111029975-1f6f5f80-8443-11eb-8b8a-34ece8649c8e.png">

# 製作した経緯

私は、各地に旅行に行くことが好きです。しかし旅行後、知らない観光地が紹介されているのを知り、事前に調べて無かったことを後悔することがあります。
現住している長崎県は歴史的な観光地が多いですが、まだ一般的には知られていない観光地も多くあります。
そのため、有名な観光地の近くに、知られていない観光地があることを教えてあげたい。予定に無かった場所にも足を運んで頂き、長崎を観光した人がもっと長崎を好きになって旅を終えて欲しいと考え、このアプリを製作いたしました。

# 使用技術

## フロントエンド

- HTML
- JavaScript
- Bootstrap

## バックエンド

- Ruby 2.6.6
- Rails 6.0.3.4

## DB

- PostgreSQL 13.1

## 本番環境

- Heroku

# ER 図

<img width="951" alt="ER図" src="https://user-images.githubusercontent.com/35606852/109402530-04f4ab00-799a-11eb-8332-41eeeb63e2e9.png"><br>

## [テーブル設計](https://docs.google.com/spreadsheets/d/10A_GsEgb5wQqrcDWASthG0lN_xqloFSHQpEWQGxFUsY/edit?usp=sharing)<br>

# 機能一覧

- ユーザ登録、編集ログイン機能（devise)
- 行きたい観光地の保存機能
- モデルコース作成（Directions API にて地点間距離取得)
- 観光地感想入力機能
- 旅行モデルコース選択機能（5 箇所回るコースを距離が短い順にエリア毎に 100 コース提示）
- 選択モデルコースの編集機能
- 画像アップロード機能(Amazon S3)

# 工夫した点

## モデルコースの作成方法

### （課題)

5 つの地点を選ぶ組み合わせ全てをデータに格納した場合、データが膨大となります。<br>
現時点で全 24405360 通り

### （解決）

1. エリア（長崎、佐世保）毎に 1000 通りのコースをランダムで作成します。<br>
2. その中から、合計移動距離が少ない 100 通りずつをユーザに表示するモデルコースとして model_courses テーブルに格納。（レコード数　計 200 )

### (利点)

1.  データ処理の負荷軽減。
2.  最初に 1000 通りしか選択しないことで、最後に残る 100 通りのコースの内容にばらつきが生まれます。

## モデルコースの表示順序が、行きたい観光地リストの内容によって変化する

### (課題)

利用者は、ただ移動距離が短いコースではなく、自分が行きたい場所が含まれ、かつ近くにある観光地を周りたいと考えるのではと考えました。

### (解決)

モデルコースの中に、行きたい観光地が含まれていた場合<br>
モデルコースの score を減算<br>
➡︎ score が低い順にソート<br>
➡︎ 距離が短く、行きたい観光地がより多く含まれているコースが上位に表示されます。

### (利点)

ユーザが行きたい観光地が含まれたモデルコースを見落とすことがなくなります。<br>
行きたい観光地が多く含まれるほど上位に表示されるため、行きたい観光地が含まれるコースの中でも差別化が可能です。
